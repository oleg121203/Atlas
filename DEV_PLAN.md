# DEV\_PLAN.md

**UNIFIED INTERFACE**: PySide6 - єдиний UI фреймворк для всього додатку.

## Atlas Target Architecture

```
atlas/
├── main.py                 # Точка входу в додаток (PySide6)
├── core/                   # Основні компоненти системи
│   ├── application.py      # Головний клас AtlasApplication
│   ├── config.py           # Управління конфігурацією
│   ├── event_bus.py        # Система подій
│   ├── module_registry.py  # Реєстр модулів
│   ├── plugin_system.py    # Система плагінів
│   ├── self_healing.py     # Самовідновлення та авто-відновлення
│   └── agents/             # Система мета-агентів
├── ui/                     # UI компоненти на PySide6 (ЄДИНИЙ ІНТЕРФЕЙС)
│   ├── chat/               # Модуль чату
│   ├── tasks/              # Модуль завдань
│   ├── agents/             # Модуль агентів
│   ├── plugins/            # UI для управління плагінами
│   ├── settings/           # Інтерфейс налаштувань
│   ├── tools/              # UI для управління інструментами
│   ├── workflow/           # UI для робочих процесів
│   ├── memory/             # UI для управління пам'яттю
│   ├── self_improvement/   # Центр самовдосконалення
│   ├── themes/             # Система тем та їх перемикач
│   ├── developer/          # Інтеграція інструментів розробника
│   ├── context/            # UI для рушія контекстної обізнаності
│   └── stats/              # Статистика та аналітика
├── tools/                  # Екосистема інструментів
│   ├── base_tool.py        # Базовий клас інструменту
│   ├── browser.py          # Інструмент для браузера
│   ├── terminal_tool.py    # Інструмент для терміналу
│   ├── screenshot_tool.py  # Інструмент для скріншотів
│   └── {tool_name}.py      # Окремі інструменти
├── workflow/               # Система управління робочими процесами
│   ├── engine.py           # Рушій робочих процесів
│   ├── execution.py        # Виконання процесів
│   └── natural_language_workflow.py # Робочі процеси на природній мові
├── intelligence/           # ШІ та контекстна обізнаність
│   ├── context_awareness_engine.py # Розуміння контексту
│   └── llm.py              # Інтеграція з LLM
├── utils/                  # Основні утиліти
│   ├── memory_management.py # Система довгострокової пам'яті
│   ├── llm_manager.py      # Управління провайдерами LLM
│   └── cache_manager.py    # Оптимізація продуктивності
└── plugins/                # Екосистема плагінів (до створення)
    ├── base.py             # Абстрактний клас PluginBase
    └── {plugin_name}/      # Пакети окремих плагінів
```




# Оновлений План Розробки Atlas

**Мета**: Перетворити проєкт Atlas на функціонально завершений, надійний та розширюваний додаток, спираючись на закладений фундамент якості коду та автоматизації.

---

## ✅ Етап 1: Фундамент Якості та Автоматизації (Завершено)

Цей етап успішно завершено. Було створено надійну інфраструктуру, яка є основою для подальшої розробки.

* [x] **Налаштування якості коду**:
    * Розширено правила **Ruff** для глибокого статичного аналізу.
    * Налаштовано **pre-commit hooks** для автоматичного форматування та виправлення коду (`ruff --fix`).
    * Проблеми з блокуванням комітів через E501 та інші правила вирішено шляхом конфігурації `.pre-commit-config.yaml`.

* [x] **Впровадження управління залежностями**:
    * Проєкт переведено на **Poetry** для ефективного управління залежностями та створення відтворюваного середовища.

* [x] **Створення інфраструктури для документації**:
    * Інтегровано **Sphinx** для генерації документації. Створено початкову структуру (`conf.py`, `index.md`).

* [x] **Розширення тестового покриття**:
    * Налаштовано **pytest** та **coverage** з вимогою покриття у 75%.
    * Додано нові інтеграційні та mock-тести (`test_llm_integration.py`, `test_eventbus.py`).

* [x] **Автоматизація робочих процесів**:
    * Оновлено **Makefile** з командами для лінтингу, форматування, тестування, збірки документації та очищення проєкту.
    * Створено скрипт `setup_development.sh` для швидкого налаштування робочого середовища.

* [x] **Виправлення критичних помилок**:
    * Усунено помилки `E501` (занадто довгі рядки) у ключових файлах, таких як `personalized_insights.py`.

---

## ✅ Фаза 2: Глибока Інтеграція та Розширення Функціоналу (Завершено)

**Мета**: "Оживити" всі компоненти програми, забезпечити їхню безшовну взаємодію та розширити ключовий функціонал.

* [ ] **1. Повне Підключення та Тестування UI**:
    * **Завдання**: Завершити підключення всіх елементів управління у кожному UI-модулі (`chat`, `tasks`, `settings` тощо) до відповідних подій `EventBus` або функцій-обробників.
    * **Завдання**: Написати UI-тести з використанням `pytest-qt` для ключових користувацьких сценаріїв.
        * *Приклад*: Тест, що симулює введення тексту користувачем у чат, натискання кнопки "Надіслати", перевірку появи повідомлення у вікні чату та запису події в `EventBus`.

* [x] **2. Розвиток Системи Плагінів та Інструментів**:
    * [x] **Завдання**: Фіналізувати базові класи `PluginBase` та `ToolBase`, задокументувавши їхній API у Sphinx.
    * [x] **Завдання**: Реалізувати в `PluginManager` та `ToolManager` механізм динамічного завантаження, вивантаження та оновлення модулів без перезапуску програми. UI (`PluginManagerUI`, `ToolManagerUI`) має автоматично реагувати на ці зміни.
    * [x] **Завдання**: Створити 2-3 повноцінних плагіни (наприклад, `git_integration`, `spotify_control`) для демонстрації та тестування можливостей системи.

* [x] **3. Наповнення та Підтримка Документації**:
    * [x] **Завдання**: Налаштувати **Sphinx autodoc** для автоматичної генерації документації з docstrings для всіх основних модулів (`core`, `utils`, `intelligence`, `workflow`).
    * [x] **Завдання**: Створити API документацію для основних модулів (`docs/api/core.md`, `docs/api/plugins.md`, `docs/api/tools.md`).
    * [ ] **Завдання**: Написати в `docs/` детальні інструкції (`how-to`) для розробників: "Як створити новий інструмент", "Як розробити плагін".
    * [ ] **Завдання**: Додати крок генерації та публікації документації (напр., на GitHub Pages) у CI/CD пайплайн.

* [x] **4. Централізоване Логування**:
    * [x] **Завдання**: Впровадити централізовану систему логування на базі стандартного модуля `logging`. 
    * [ ] **Завдання**: Налаштувати запис логів у файл та виведення в окрему панель в UI для налагодження.
    * [ ] **Завдання**: Провести профілювання продуктивності для ключових операцій (запуск програми, відповідь LLM, виконання складних workflow) та визначити "вузькі місця" для подальшої оптимізації.

---

## 🔄 Фаза 3: Поточна Робота - Тестування, Документація та Виправлення Інструментів

**Мета**: Завершити систему тестування, виправити legacy інструменти та покращити документацію для розробників.

**Поточний Стан Системи (за результатами test_integration.py)**:
- ✅ 3/3 демо-плагіни працюють коректно (git_integration, system_monitor, spotify_control)
- ✅ EventBus та Config системи працюють
- ✅ 5/5 інструментів завантажено успішно (creative, delay, playful, plugin, proactive)
- ❌ Покриття тестами: потребує поліпшення (ціль 75%)

### **Пріоритетні Завдання**:

* [x] **1. Виправлення Системи Інструментів**:
    * [x] **Завдання**: Виправити проблеми імпортів в legacy tools (відносні імпорти, відсутні модулі)
    * [x] **Завдання**: Рефакторинг проблемних інструментів для роботи з новою архітектурою
    * [x] **Завдання**: Валідація що всі базові інструменти завантажуються коректно

* [ ] **2. Покращення Покриття Тестами**:
    * [x] **Завдання**: Створити початкові тести для core модулів (application.py, plugin_system.py, module_registry.py)
    * [ ] **Завдання**: Виправити тести для роботи з правильними API інтерфейсами
    * [ ] **Завдання**: Створити pytest-qt тести для UI компонентів
    * [ ] **Завдання**: Досягти мінімум 75% покриття

* [x] **3. Developer Guides та How-To**:
    * [x] **Завдання**: Написати "How-to Guide: Creating a Plugin" з прикладами
    * [x] **Завдання**: Написати "How-to Guide: Creating a Tool" з прикладами  
    * [ ] **Завдання**: Створити архітектурний огляд системи
    * [ ] **Завдання**: Документувати event-driven architecture та EventBus API

* [ ] **4. UI Панель Логування**:
    * **Завдання**: Створити UI панель для перегляду логів в реальному часі
    * **Завдання**: Налаштувати запис логів у файли з ротацією
    * **Завдання**: Інтеграція логування з самодіагностикою

---

## Фаза 4: Performance і Production Ready

**Мета**: Оптимізувати продуктивність та підготувати до production використання.

* [ ] **1. Профілювання та Оптимізація**:
    * **Завдання**: Провести профілювання startup часу
    * **Завдання**: Оптимізувати завантаження плагінів
    * **Завдання**: Кешування для покращення відгуку LLM

* [ ] **2. CI/CD Pipeline**:
    * **Завдання**: Налаштувати автоматичну збірку документації
    * **Завдання**: Автоматичні тести при commit
    * **Завдання**: Релізні збірки та розповсюдження