# DEV\_PLAN.md

**UNIFIED INTERFACE**: PySide6 - єдиний UI фреймворк для всього додатку.

## Atlas Target Architecture

```
atlas/
├── main.py                 # Точка входу в додаток (PySide6)
├── core/                   # Основні компоненти системи
│   ├── application.py      # Головний клас AtlasApplication
│   ├── config.py           # Управління конфігурацією
│   ├── event_bus.py        # Система подій
│   ├── module_registry.py  # Реєстр модулів
│   ├── plugin_system.py    # Система плагінів
│   ├── self_healing.py     # Самовідновлення та авто-відновлення
│   └── agents/             # Система мета-агентів
├── ui/                     # UI компоненти на PySide6 (ЄДИНИЙ ІНТЕРФЕЙС)
│   ├── chat/               # Модуль чату
│   ├── tasks/              # Модуль завдань
│   ├── agents/             # Модуль агентів
│   ├── plugins/            # UI для управління плагінами
│   ├── settings/           # Інтерфейс налаштувань
│   ├── tools/              # UI для управління інструментами
│   ├── workflow/           # UI для робочих процесів
│   ├── memory/             # UI для управління пам'яттю
│   ├── self_improvement/   # Центр самовдосконалення
│   ├── themes/             # Система тем та їх перемикач
│   ├── developer/          # Інтеграція інструментів розробника
│   ├── context/            # UI для рушія контекстної обізнаності
│   └── stats/              # Статистика та аналітика
├── tools/                  # Екосистема інструментів
│   ├── base_tool.py        # Базовий клас інструменту
│   ├── browser.py          # Інструмент для браузера
│   ├── terminal_tool.py    # Інструмент для терміналу
│   ├── screenshot_tool.py  # Інструмент для скріншотів
│   └── {tool_name}.py      # Окремі інструменти
├── workflow/               # Система управління робочими процесами
│   ├── engine.py           # Рушій робочих процесів
│   ├── execution.py        # Виконання процесів
│   └── natural_language_workflow.py # Робочі процеси на природній мові
├── intelligence/           # ШІ та контекстна обізнаність
│   ├── context_awareness_engine.py # Розуміння контексту
│   └── llm.py              # Інтеграція з LLM
├── utils/                  # Основні утиліти
│   ├── memory_management.py # Система довгострокової пам'яті
│   ├── llm_manager.py      # Управління провайдерами LLM
│   └── cache_manager.py    # Оптимізація продуктивності
└── plugins/                # Екосистема плагінів (до створення)
    ├── base.py             # Абстрактний клас PluginBase
    └── {plugin_name}/      # Пакети окремих плагінів
```



***

# Оновлений План Розробки Atlas

## Фаза 1: Очищення та організація робочого простору

**Мета**: Створити чисту, функціональну та зрозумілу структуру проєкту. Видалити все зайве, що не стосується безпосередньо вихідного коду програми, та організувати файли для зручності розробки й супроводу.

* **1. Видалення непотрібних файлів:**
    * **Завдання**: Провести аудит кореневої директорії та всього проєкту. Видалити всі файли, що не є частиною фінальної збірки або процесу розробки.
    * **Що видалити**:
        * Зайві документи, чернетки, старі версії файлів.
        * Невикористовувані скрипти.
        * Локальні файли конфігурації IDE (напр., `.idea/`, `.vscode/` - додати в `.gitignore`).
        * Тестові дані та артефакти, які не є частиною автоматизованих тестів.
        * Будь-які інші файли, що не мають прямого відношення до функціонування програми.

* **2. Організація структури проєкту:**
    * **Завдання**: Перемістити файли у відповідні директорії згідно з архітектурою.
    * **Що зробити**:
        * Створити директорію `docs/` для всієї документації (архітектурні рішення, інструкції для користувачів/розробників).
        * Створити директорію `scripts/` для допоміжних скриптів (напр., для збірки, деплою, аналізу).
        * Переконатися, що папка `tests/` містить виключно код для тестування і її структура повторює структуру папки `atlas/` для зручності навігації.
        * Головний файл `main.py` та файли конфігурації проєкту (`pyproject.toml`, `.gitignore`) повинні залишитися в корені.

* **3. Налаштування управління залежностями:**
    * **Завдання**: Стандартизувати управління залежностями для забезпечення відтворюваності середовища.
    * **Рекомендація**: Використовувати `Poetry` або `PDM` для управління залежностями та віртуальним оточенням. Створити `pyproject.toml` з чітко визначеними основними та девелоперськими залежностями.

---

## Фаза 2: Аналіз та Покращення Воркфлоу

**Мета**: Виявити слабкі місця в поточному процесі розробки та впровадити практики для підвищення надійності, якості коду та швидкості розробки.

### Недопрацювання в поточному плані

1.  **Запізніле тестування**: Процес тестування починається в кінці (Фаза 2.4). Це збільшує ризик регресій та ускладнює пошук помилок. Тести потрібно писати паралельно з розробкою функціоналу.
2.  **Відсутність CI/CD**: В плані немає згадки про автоматизацію. Ручна перевірка коду, тестування та збірка — це повільно і ненадійно.
3.  **Неформалізована документація**: Окрім стандартизації подій, немає завдання вести документацію коду (docstrings) та архітектури. Це ускладнить підтримку та залучення нових розробників.
4.  **Непрозора конфігурація**: `core/config.py` згадується, але немає чіткої стратегії. Жорстко закодовані налаштування або відсутність розділення для `dev` та `prod` середовищ може призвести до проблем.
5.  **Відсутність стандартів якості коду**: Немає інструментів для автоматичної перевірки стилю коду та пошуку потенційних помилок (лінтерів).

### Пропозиції щодо покращення

1.  **Інтегрувати тестування в щоденний процес**:
    * **Завдання**: Писати Unit-тести для нової логіки (особливо в `core/`, `utils/`, `intelligence/`). Покривати ключові сценарії інтеграційними тестами (напр., взаємодія через `EventBus`). Використовувати `pytest-qt` для тестування UI-компонентів.

2.  **Впровадити CI/CD (Continuous Integration/Continuous Delivery)**:
    * **Завдання**: Налаштувати GitHub Actions (або аналог).
    * **Кроки**:
        * Створити воркфлоу, який на кожен `push` або `pull request` автоматично запускає лінтери.
        * Додати крок для запуску всіх тестів (`pytest`).
        * (В майбутньому) Додати крок для автоматичної збірки проєкту.

3.  **Впровадити інструменти для якості коду**:
    * **Завдання**: Інтегрувати `Ruff` (або `Flake8`+`isort`+`pyupgrade`) для лінтингу та `Black` для форматування коду. Налаштувати pre-commit хуки, щоб перевірки виконувались автоматично перед кожним комітом.

4.  **Покращити управління конфігурацією**:
    * **Завдання**: Використовувати бібліотеку типу `pydantic-settings` для завантаження конфігурації з `.env` файлів та змінних оточення. Це дозволить безпечно зберігати секрети (API-ключі) поза системою контролю версій.

5.  **Формалізувати процес документації**:
    * **Завдання**: Встановити стандарт для docstrings (напр., Google-style) і вимагати їх наявності для всіх нових функцій та класів. Ключові архітектурні рішення фіксувати в папці `docs/`.

---

## Фаза 3: Імплементація та розвиток (Оновлений план)

**Мета**: Завершити функціонал, спираючись на нові, покращені процеси розробки.

* [ ] **1. Підключення всіх елементів управління UI:**
    * **Завдання**: Завершити підключення всіх кнопок, меню та перемикачів до `EventBus` або відповідних функцій.

* [ ] **2. Написання Unit-тестів для критичних компонентів:**
    * **Завдання**: Покрити тестами основну логіку в `utils/`, `core/config.py`, та валідатори, як і планувалося, але робити це паралельно з доопрацюванням коду.

* [ ] **3. Розробка системи плагінів:**
    * **Завдання**: Створити надійний `PluginBase` та розробити механізм ізольованого завантаження/вивантаження плагінів.

* [ ] **4. Моніторинг та зворотний зв'язок:**
    * **Завдання**: Впровадити систему логування (стандартний модуль `logging`), щоб записувати ключові події та помилки. Це допоможе в налагодженні та моніторингу роботи програми.